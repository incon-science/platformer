[gd_scene format=3 uid="uid://ducp7rsjpf40n"]

[ext_resource type="Script" uid="uid://spewh8xv7lts" path="res://src/player/player.gd" id="1_4anbu"]
[ext_resource type="Script" uid="uid://bwbxypkqm7bgl" path="res://src/state_machine/state_machine.gd" id="2_rxibo"]
[ext_resource type="Script" uid="uid://btp87202ddbxl" path="res://src/player/states/air_entry_state.gd" id="3_x42xx"]
[ext_resource type="Script" uid="uid://dx15tnwh62i1l" path="res://src/player/states/fall_state.gd" id="4_l271a"]
[ext_resource type="Script" uid="uid://cl2swaeebfu0s" path="res://src/player/states/jump_state.gd" id="5_8ydov"]
[ext_resource type="Script" uid="uid://b6w2sn3ikefko" path="res://src/player/states/floor_entry_state.gd" id="6_ylhto"]
[ext_resource type="Script" uid="uid://m06e3ohv0ud1" path="res://src/player/states/idle_state.gd" id="7_cwolq"]
[ext_resource type="Script" uid="uid://bgrdchyvffn8v" path="res://src/player/states/run_state.gd" id="8_2smqc"]
[ext_resource type="Script" uid="uid://b04xgcpknjjdw" path="res://src/player/states/wall_slide_state.gd" id="9_8ydov"]
[ext_resource type="Script" uid="uid://d00j5gw538kn2" path="res://src/player/states/wall_jump_state.gd" id="10_ylhto"]
[ext_resource type="Script" uid="uid://crbn04ab1d1vk" path="res://src/player/states/dash_state.gd" id="11_ylhto"]
[ext_resource type="Texture2D" uid="uid://clfrcc3vsenmn" path="res://sprites/AnimationSheet_Character.png" id="12_jcdrv"]
[ext_resource type="AudioStream" uid="uid://d3ppmku2r4mc" path="res://sounds/hero_jump.wav" id="13_hja65"]
[ext_resource type="AudioStream" uid="uid://bdy3mdrl28qmq" path="res://sounds/hero_land_soft.wav" id="14_5shm8"]
[ext_resource type="AudioStream" uid="uid://cqr02pa8h5tob" path="res://sounds/hero_wall_jump.wav" id="15_5efpn"]
[ext_resource type="AudioStream" uid="uid://bdcg2t8w75wa8" path="res://sounds/hero_dash.wav" id="16_4uy46"]
[ext_resource type="AudioStream" uid="uid://bpabs1jo2k3i7" path="res://sounds/hero_wall_slide.wav" id="17_k60ra"]
[ext_resource type="AudioStream" uid="uid://bk1u2t0pf6uu3" path="res://sounds/hero_run_footsteps_stone.wav" id="18_a4vah"]
[ext_resource type="PackedScene" uid="uid://bf78142na1p7k" path="res://src/particles/jump_particle.tscn" id="19_vwi60"]
[ext_resource type="PackedScene" uid="uid://kur8cpiyrv8b" path="res://src/particles/ground_particle.tscn" id="20_o04tx"]

[sub_resource type="BoxMesh" id="BoxMesh_qnmj6"]
size = Vector3(48, 64, 1)

[sub_resource type="BoxMesh" id="BoxMesh_4anbu"]
size = Vector3(16, 16, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qnmj6"]
size = Vector2(32, 62)

[sub_resource type="AtlasTexture" id="AtlasTexture_2smqc"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_rl62b"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cwolq"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_wlj80"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6bm8s"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hrerp"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_dpt0q"]
atlas = ExtResource("12_jcdrv")
region = Rect2(128, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_wcxbk"]
atlas = ExtResource("12_jcdrv")
region = Rect2(160, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_p6grl"]
atlas = ExtResource("12_jcdrv")
region = Rect2(192, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_e7e1q"]
atlas = ExtResource("12_jcdrv")
region = Rect2(224, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_h0enb"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_phdu6"]
atlas = ExtResource("12_jcdrv")
region = Rect2(64, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4ptlo"]
atlas = ExtResource("12_jcdrv")
region = Rect2(96, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5shm8"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5efpn"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4uy46"]
atlas = ExtResource("12_jcdrv")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_k60ra"]
atlas = ExtResource("12_jcdrv")
region = Rect2(96, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_a4vah"]
atlas = ExtResource("12_jcdrv")
region = Rect2(128, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_vwi60"]
atlas = ExtResource("12_jcdrv")
region = Rect2(160, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_o04tx"]
atlas = ExtResource("12_jcdrv")
region = Rect2(192, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_j2873"]
atlas = ExtResource("12_jcdrv")
region = Rect2(224, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_rhq4p"]
atlas = ExtResource("12_jcdrv")
region = Rect2(64, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kpcs5"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xmpm3"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_evlgt"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gsylq"]
atlas = ExtResource("12_jcdrv")
region = Rect2(64, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_utg71"]
atlas = ExtResource("12_jcdrv")
region = Rect2(64, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_f0c71"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fpqwn"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_oyld2"]
atlas = ExtResource("12_jcdrv")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_vwsmr"]
atlas = ExtResource("12_jcdrv")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jcdrv"]
atlas = ExtResource("12_jcdrv")
region = Rect2(64, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hja65"]
atlas = ExtResource("12_jcdrv")
region = Rect2(96, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_j2873"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2smqc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rl62b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cwolq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wlj80")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6bm8s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hrerp")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dpt0q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wcxbk")
}],
"loop": false,
"name": &"jumpdown",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_p6grl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e7e1q")
}],
"loop": false,
"name": &"jumpground",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_h0enb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_phdu6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4ptlo")
}],
"loop": false,
"name": &"jumpup",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_5shm8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5efpn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4uy46")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k60ra")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a4vah")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vwi60")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o04tx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j2873")
}],
"loop": true,
"name": &"run",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rhq4p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kpcs5")
}],
"loop": true,
"name": &"teleport",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xmpm3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_evlgt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gsylq")
}],
"loop": true,
"name": &"teleport_in",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_utg71")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f0c71")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fpqwn")
}],
"loop": true,
"name": &"teleport_out",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_oyld2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vwsmr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jcdrv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hja65")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_dpt0q"]
random_pitch = 1.2
streams_count = 1
stream_0/stream = ExtResource("13_hja65")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_wcxbk"]
random_pitch = 1.4
streams_count = 1
stream_0/stream = ExtResource("14_5shm8")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_p6grl"]
random_pitch = 1.2
streams_count = 1
stream_0/stream = ExtResource("15_5efpn")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_e7e1q"]
random_pitch = 1.4
streams_count = 1
stream_0/stream = ExtResource("16_4uy46")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_xmpm3"]
random_pitch = 1.4
streams_count = 1
stream_0/stream = ExtResource("17_k60ra")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_h0enb"]
random_pitch = 1.5
streams_count = 1
stream_0/stream = ExtResource("18_a4vah")

[sub_resource type="Gradient" id="Gradient_jcdrv"]
offsets = PackedFloat32Array(0, 0.13138686, 0.38686132, 1)
colors = PackedColorArray(1, 1, 1, 1, 0.5109489, 0.5109489, 0.5109489, 1, 0, 0, 0, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_hja65"]
gradient = SubResource("Gradient_jcdrv")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.85714287, 0.14285715)
metadata/_snap_enabled = true
metadata/_snap_count = 3

[node name="Player" type="CharacterBody2D" unique_id=2070335124]
z_index = 1
collision_layer = 3
script = ExtResource("1_4anbu")
max_speed = 450.0
max_h_velocity_ratio = 3.0
running_acc_time = 0.188
running_dec_time = 0.171
jumping_acc_time = 0.221
jumping_dec_time = 0.234
falling_acc_time = 0.234
falling_dec_time = 0.25
jump_not_held_gravity_ratio = 1.6
down_held_gravity_ratio = 2.0
gravity_limit = 1000.0
down_held_gravity_limit_ratio = 1.2
jump_height = 112.0
jump_time_to_peak = 0.4
jump_time_to_land = 0.3
max_up_velocity_ratio = 3.0
jump_peak_boost = 100.0
jump_peak_gravity_ratio = 0.7
corner_correction_distance = 8
oneway_platform_assist_distance = 4
max_wall_slide_speed = 200.0
down_held_wall_slide_ratio = 2.0
wall_slide_acc_time = 0.067
wall_jump_v_velocity_ratio = 0.8
wall_jump_h_velocity = 400.0
wall_jumping_acc_time = 0.221
wall_jumping_dec_time = 0.234
wall_jumping_towards_wall_dec_time = 0.289
dash_speed = 1200.0
dash_distance = 125.0
after_dash_speed = 300.0
after_dash_gravity_ratio = 0.2
max_move_skew = -6.0
shape_rescale_weight = 0.2
squash_width_scale_at_rest = 1.1
squash_width_scale_at_max_fall = 1.4
squash_height_scale_at_rest = 0.9
squash_height_scale_at_max_fall = 0.6
stretch_width_scale = 0.6
stretch_height_scale = 1.2
metadata/_edit_group_ = true

[node name="Shape" type="Node2D" parent="." unique_id=988039357]
visible = false

[node name="Body" type="MeshInstance2D" parent="Shape" unique_id=430382933]
position = Vector2(0, -32)
mesh = SubResource("BoxMesh_qnmj6")

[node name="LeftEye" type="MeshInstance2D" parent="Shape" unique_id=656615274]
self_modulate = Color(0, 0, 0, 1)
position = Vector2(19, -44)
mesh = SubResource("BoxMesh_4anbu")

[node name="RightEye" type="MeshInstance2D" parent="Shape" unique_id=690879766]
self_modulate = Color(0, 0, 0, 1)
position = Vector2(-5, -44)
mesh = SubResource("BoxMesh_4anbu")

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=1656249480]
position = Vector2(0, -31)
shape = SubResource("RectangleShape2D_qnmj6")

[node name="StateMachine" type="Node" parent="." unique_id=2054057317 node_paths=PackedStringArray("target_node", "default_state")]
script = ExtResource("2_rxibo")
target_node = NodePath("..")
default_state = NodePath("AirEntryState")
metadata/_custom_type_script = "uid://bwbxypkqm7bgl"

[node name="AirEntryState" type="Node" parent="StateMachine" unique_id=549728677]
script = ExtResource("3_x42xx")
metadata/_custom_type_script = "uid://btp87202ddbxl"

[node name="FallState" type="Node" parent="StateMachine/AirEntryState" unique_id=1159993235]
script = ExtResource("4_l271a")
metadata/_custom_type_script = "uid://dx15tnwh62i1l"

[node name="JumpState" type="Node" parent="StateMachine/AirEntryState" unique_id=610039875]
script = ExtResource("5_8ydov")
metadata/_custom_type_script = "uid://cl2swaeebfu0s"

[node name="FloorEntryState" type="Node" parent="StateMachine" unique_id=32818473]
script = ExtResource("6_ylhto")
metadata/_custom_type_script = "uid://b6w2sn3ikefko"

[node name="IdleState" type="Node" parent="StateMachine/FloorEntryState" unique_id=1530464151]
script = ExtResource("7_cwolq")
metadata/_custom_type_script = "uid://m06e3ohv0ud1"

[node name="RunState" type="Node" parent="StateMachine/FloorEntryState" unique_id=622199257]
script = ExtResource("8_2smqc")
metadata/_custom_type_script = "uid://bgrdchyvffn8v"

[node name="WallSlideState" type="Node" parent="StateMachine" unique_id=1278021011]
script = ExtResource("9_8ydov")
metadata/_custom_type_script = "uid://b04xgcpknjjdw"

[node name="WallJumpState" type="Node" parent="StateMachine" unique_id=1438294549]
script = ExtResource("10_ylhto")
metadata/_custom_type_script = "uid://d00j5gw538kn2"

[node name="DashState" type="Node" parent="StateMachine" unique_id=79126621]
script = ExtResource("11_ylhto")
metadata/_custom_type_script = "uid://crbn04ab1d1vk"

[node name="Timers" type="Node" parent="." unique_id=2100185851]

[node name="JumpPeakGravity" type="Timer" parent="Timers" unique_id=1337903496]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="JumpCoyote" type="Timer" parent="Timers" unique_id=246467915]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="JumpBuffer" type="Timer" parent="Timers" unique_id=648895945]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="WallJumpCoyote" type="Timer" parent="Timers" unique_id=1321485268]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="WallJumpBuffer" type="Timer" parent="Timers" unique_id=1276400043]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="DashCooldown" type="Timer" parent="Timers" unique_id=1515432951]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.2
one_shot = true

[node name="AfterDashGravity" type="Timer" parent="Timers" unique_id=1554711406]
unique_name_in_owner = true
process_callback = 0
wait_time = 0.1
one_shot = true

[node name="Sprite" type="AnimatedSprite2D" parent="." unique_id=969411766]
position = Vector2(0, -36)
scale = Vector2(2.25, 2.25)
sprite_frames = SubResource("SpriteFrames_j2873")
animation = &"teleport"
autoplay = "idle"

[node name="jump_sound" type="AudioStreamPlayer" parent="." unique_id=703265265]
stream = SubResource("AudioStreamRandomizer_dpt0q")
volume_db = -4.0

[node name="land_sound" type="AudioStreamPlayer" parent="." unique_id=125982520]
stream = SubResource("AudioStreamRandomizer_wcxbk")

[node name="walljump_sound" type="AudioStreamPlayer" parent="." unique_id=742090384]
stream = SubResource("AudioStreamRandomizer_p6grl")
volume_db = -4.0

[node name="dash_sound" type="AudioStreamPlayer" parent="." unique_id=107878534]
stream = SubResource("AudioStreamRandomizer_e7e1q")

[node name="slide_sound" type="AudioStreamPlayer" parent="." unique_id=1193293659]
stream = SubResource("AudioStreamRandomizer_xmpm3")

[node name="run_sound" type="AudioStreamPlayer" parent="." unique_id=335528450]
stream = SubResource("AudioStreamRandomizer_h0enb")

[node name="jump_particle" parent="." unique_id=842905782 instance=ExtResource("19_vwi60")]

[node name="ground_particle" parent="." unique_id=1979884965 instance=ExtResource("20_o04tx")]

[node name="PointLight2D" type="PointLight2D" parent="." unique_id=479851347]
position = Vector2(0, -32)
texture = SubResource("GradientTexture2D_hja65")

[connection signal="wall_entered" from="." to="." method="_on_wall_entered"]
[connection signal="wall_exited" from="." to="." method="_on_wall_exited"]
